let server;const displayData=()=>{const list=document.querySelector(".stored");list.innerHTML="",server.data.query().all().execute().then(results=>{results.length?results.forEach(item=>{const reader=new FileReader;list.innerHTML+=`\n\t\t\t\t\t\t<li data-id="${item.id}">\n\t\t\t\t\t\t\t<p><img /></p>\n\t\t\t\t\t\t\t<p>${item.text}</p>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p>${item.date}</p>\n\t\t\t\t\t\t\t\t<p>${item.number}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<aside>Edit</aside>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t`,reader.addEventListener("load",()=>{document.querySelector('li[data-id="'+item.id+'"] img').src=reader.result}),item.file&&reader.readAsDataURL(item.file),document.querySelector('li[data-id="'+item.id+'"] aside').addEventListener("click",()=>{editItem(item)})}):list.innerHTML="\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<p>No item stored</p>\n\t\t\t\t\t</li>\n\t\t\t\t"})},editItem=item=>{};window.addEventListener("load",()=>{db.open({server:"test-data-storing",version:1,schema:{data:{key:{keyPath:"id",autoIncrement:!0},indexes:{text:{},number:{},date:{},file:{}}}}}).then(s=>{server=s,displayData()}),document.querySelector("form").addEventListener("submit",e=>{e.preventDefault();let data=[...new FormData(e.target)].reduce((acc,[key,value])=>(acc[key]=value,acc),{});server.data.add(data).then(()=>{displayData()})})});